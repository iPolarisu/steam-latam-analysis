<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1.0, shrink-to-fit=no">
<link href="assets/images/favicon.png" rel="icon" />
<title>Steam Latam Analysis</title>
<meta name="description" content="Steam Latam Analysis">
<meta name="author" content="harnishdesign.net">

<!-- Stylesheet
============================== -->
<!-- Bootstrap -->
<link rel="stylesheet" type="text/css" href="assets/vendor/bootstrap/css/bootstrap.min.css" />
<!-- Font Awesome Icon -->
<link rel="stylesheet" type="text/css" href="assets/vendor/font-awesome/css/all.min.css" />
<!-- Magnific Popup -->
<link rel="stylesheet" type="text/css" href="assets/vendor/magnific-popup/magnific-popup.min.css" />
<!-- Highlight Syntax -->
<link rel="stylesheet" type="text/css" href="assets/vendor/highlight.js/styles/github.css" />
<!-- Custom Stylesheet -->
<link rel="stylesheet" type="text/css" href="assets/css/stylesheet.css" />
</head>

<body data-spy="scroll" data-target=".idocs-navigation" data-offset="125">

<!-- Preloader -->
<div class="preloader">
  <div class="lds-ellipsis">
    <div></div>
    <div></div>
    <div></div>
    <div></div>
  </div>
</div>
<!-- Preloader End --> 

<!-- Document Wrapper   
=============================== -->
<div id="main-wrapper"> 
  
  <!-- Header
  ============================ -->
  <header id="header" class="sticky-top"> 
    <!-- Navbar -->
    <nav class="primary-menu navbar navbar-expand-lg bg-dark navbar-text-light navbar-dropdown-dark border-0">
      <div class="container-fluid">
        <!-- Sidebar Toggler -->
		<button id="sidebarCollapse" class="navbar-toggler d-block d-md-none" type="button"><span></span><span class="w-75"></span><span class="w-50"></span></button>
		
		<!-- Logo --> 
        <a class="logo ml-md-3" href="index.html" title="iDocs Template"> <img src="assets/images/logo-light.png" alt="iDocs Template" width="128px"/> </a> 
		<span class="text-2 text-light ml-2">v1.0</span> 
        <!-- Logo End -->
        
		<!-- Navbar Toggler -->
		<button class="navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#header-nav"><span></span><span></span><span></span></button>
        
    </nav>
    <!-- Navbar End --> 
  </header>
  <!-- Header End --> 
  
  <!-- Content
  ============================ -->
  <div id="content" role="main">
    
	<!-- Sidebar Navigation
	============================ -->
	<div class="idocs-navigation bg-light">
      <ul class="nav flex-column ">
        <li class="nav-item"><a class="nav-link active" href="#analysis">Analysis</a>
          <ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="#analysis_data">About the Data</a></li>
            <li class="nav-item"><a class="nav-link" href="#analysis_users">Users</a></li>
            <li class="nav-item"><a class="nav-link" href="#analysis_friends">Friends</a></li>
            <li class="nav-item"><a class="nav-link" href="#analysis_countries">Countries</a></li>
            <li class="nav-item"><a class="nav-link" href="#analysis_games">Games</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="#data">Getting the Data</a>
          <ul class="nav flex-column">
			<li class="nav-item"><a class="nav-link" href="#data_ids">Latam IDs</a></li>
			<li class="nav-item"><a class="nav-link" href="#data_friends">Friends</a></li>
			<li class="nav-item"><a class="nav-link" href="#data_users">Users</a></li>
          </ul>
        </li>
        <li class="nav-item"><a class="nav-link" href="#pig">Apache Pig</a>
			<ul class="nav flex-column">
            <li class="nav-item"><a class="nav-link" href="#pig_preparing">Preparing the Pig Script</a></li>
            <li class="nav-item"><a class="nav-link" href="#pig_running">Running the Pig Script</a></li>
            <li class="nav-item"><a class="nav-link" href="#pig_results">Results</a></li>

      </ul>
		</li>
		<li class="nav-item"><a class="nav-link" href="#idocs_faq">FAQ</a></li>
      </ul>
    </div>
    
    <!-- Docs Content
	============================ -->
    <div class="idocs-content">
      <div class="container"> 
        
        <!-- Getting Started
		============================ -->
        <section id="analysis">
        <h1>Analysis of Latin American Steam Users</h1>
        <h2>Analysis</h2>
        <p class="lead">For instructions on how to run the experiment yourself, jump to the "Getting the Data" section.</p>
		<hr>
		<div class="row">
			<div class="col-sm-6 col-lg-4">
				<ul class="list-unstyled">
					<li><strong>Version:</strong> 1.0</li>
					<li>
            <strong>Authors:</strong> 
            <a href="https://github.com/iPolarisu" target="_blank">iPolarisu</a>, <a href="https://github.com/ccarrions" target="_blank">ccarrions</a>, <a href="https://github.com/AlexReisM01" target="_blank">AlexReisM01</a>
          </li>
				</ul>
			</div>
			<div class="col-sm-6 col-lg-4">
				<ul class="list-unstyled">
					<li><strong class="font-weight-700">Created:</strong> 28 June, 2023</li>
					<li><strong>Update:</strong> 1 July, 2023</li>
				</ul>
			</div>
		</div>
        <p class="alert alert-info">If you have any questions that are beyond the scope of this help file, please feel free to open an issue on the <a target="_blank" href="https://github.com/iPolarisu/steam-latam-analysis">project repository</a>.</p>
        </section>
        
		<hr class="divider">
		
        <!-- Installation
		============================ -->
        <section id="analysis_data">
          <h2>About the Data</h2>
          <p class="lead">The data is a pretty big sample of Latin American Steam Users and their connections (friendship links between accounts), it is inspired by <a target="_blank" href="https://steam.internet.byu.edu/">this study</a>. The acquisition method is partially based on <a target="_blank" href="https://steam.internet.byu.edu/oneill-condensing-steam.pdf">this paper</a>, it's basically divided in three parts:</p>
          <ol>
            <li>Obtain the IDs of the top 250 Steam Users from Latin America according to <a target="_blank" href="https://steamladder.com/ladder/friends/">Steam Ladder</a> via webscraping.</li>
            <li>Obtain all of their friends lists using the SteamAPI.</li>
            <li>Choose a particular date and obtain user information on all of the collected IDs (both friends and queried users) using the SteamAPI.</li>
          </ol>
          <p class="alert alert-info">You can download the data <a target="_blank" href="https://github.com/iPolarisu/steam-latam-analysis/tree/main/steam_latam_data">here</a>.</p>
          <p class="alert alert-danger">This dataset was generated purely for research purposes and is not endorsed or supported by Steam or Valve Corporation. The dataset was created in compliance with the Steam API terms of use, utilizing publicly available data at the time of execution. The information contained in this dataset is provided "as is" without any representations or warranties, express or implied. The creators of this dataset do not guarantee the accuracy, completeness, or reliability of the information. Any reliance you place on such information is therefore strictly at your own risk. The creators of this dataset shall not be liable for any loss or damage arising from the use of the dataset. Please note that the dataset may not reflect the most current data or changes made by Steam or its users. Users of this dataset are advised to refer to the official Steam website and API documentation for the latest and most accurate information.</p>
        </section>
        
		<hr class="divider">
		
        <!-- HTML Structure
		============================ -->
        <section id="analysis_users">
          <h2>Users</h2>
          <p class="text-4">User fields.</p>
          <pre><code class="bash">
            steam_id, username, time_created, active_game*, country

            *game being played at the moment of scrapping. 
          </code></pre>
          <p class="text-4">Users table.</p>
          <pre><code class="bash">
            # before cleaning
            ~500.000 rows
            # after cleaning
            452.472 rows
          </code></pre>
          <p class="alert alert-info">Take into account that we deleted duplicated users.</p>
        </section>
        </section>
        
		<hr class="divider">
		        
		<!-- Sass
		============================ -->
        <section id="analysis_friends">
          <h2>Friends</h2>
          <p class="text-4">Friends fields.</p>
          <pre><code class="bash">
            steam_id0, steam_id1, friends_since
          </code></pre>
          <p class="text-4">Friends table.</p>
          <pre><code class="bash">
            # before cleaning
            ~1.400.000 rows
            # after cleaning
            1.017.591 rows
          </code></pre>
          <p class="alert alert-info">Take into account that we deleted duplicated friends relationships, that means if we had two relationships that were mirrored between each other, we now only kept one of them.</p>
        </section>
        
		<hr class="divider">
		
		<!-- Color Schemes
		============================ -->
        <section id="analysis_countries">
          <h2>Countries</h2>
          <p class="text-4">Users by country.</p>
          <pre><code class="bash">
            (BR,41270)
            (AR,39993)
            (US,26995)
            (CL,22162)
            (PE,18667)
            (RU,12347)
            (MX,11905)
            (DE,6314)
            (JP,6012)
            (CA,5959)
          </code></pre>
          <p class="text-4">Countries besties.</p>
          <pre><code class="bash">
            ((BR,BR),51590)
            ((AR,AR),35907)
            ((CL,CL),22212)
            ((PE,PE),11536)
            ((MX,MX),9368)
            ((AR,CL),7050)
            ((AR,UY),6450)
            ((VE,VE),6148)
            ((BR,US),5989)
            ((AR,BR),5790)
            ((AR,US),5365)
            ((AR,PE),4556)
            ((CO,CO),3919)
            ((AR,MX),3812)
            ((PY,PY),3615)
            ((EC,EC),3495)
            ((BR,RU),3305)
            ((GT,GT),3134)
            ((AR,JP),3072)
            ((MX,US),2882)
            ((PE,US),2760)
            ((BR,JP),2616)
            ((UY,UY),2588)
            ((CL,US),2446)
            ((BR,DE),2404)
          </code></pre>
        </section>
        
		<hr class="divider">
		
		<!-- Customization
		============================ -->
        <section id="analysis_games">
          <h2>Games</h2>
          <p class="text-4">Games.</p>
          <p class="text-4">Most played games by country.</p>
          <pre><code class="bash">
            (BR,Counter-Strike: Global Offensive,318)
            (PE,Dota 2,148)
            (RU,Dota 2,116)
            (US,Counter-Strike: Global Offensive,111)
            (AR,Counter-Strike: Global Offensive,106)
            (DE,Counter-Strike: Global Offensive,63)
            (RO,Counter-Strike: Global Offensive,59)
            (PL,Counter-Strike: Global Offensive,53)
            (JP,Counter-Strike: Global Offensive,52)
            (ES,Counter-Strike: Global Offensive,41)
          </code></pre>
          <p class="text-4">Pairs of friends playing the same game.</p>
          <pre><code class="bash">
            (Counter-Strike: Global Offensive,66)
            (Dead by Daylight,34)
            (Dota 2,20)
            (Grand Theft Auto V,7)
            (Wallpaper Engine,6)
            (Left 4 Dead 2,5)
            (Rust,4)
            (ShareX,3)
            (Cookie Clicker,1)
            (Counter-Strike,1)
          </code></pre>
        </section>
        
		<hr class="divider">
		
        <!-- Logo Settings
		============================ -->
        <section id="data">
          <h2>Getting the Data</h2>
          <p class="lead mb-5">If you want to get the data yourself, you can check the <a target="_blank" href="https://github.com/iPolarisu/steam-latam-analysis">project repository</a> and execute the necessary Python Scripts.</p>
          <p class="alert alert-info">We used Python 3.10+ to run the scripts.</p>
        </section>
		
        
		<hr class="divider">
		
		<!-- ids
		============================ -->
        <section id="data_ids">
          <h2>Latam IDs</h2>
          <p class="text-4">First of all we need to install the necessary modules via pip.</p>
          <pre><code class="bash">
            pip install -r requirements.txt
          </code></pre>
          <p class="text-4">Now we will use a webscraping script that gets the top 250 user ids with the most friends for each latin american country according to SteamLadder.</p>
          <pre><code class="bash">
            cd steam_ladder_data/
            python steam_ladder_scraper.py
          </code></pre>
          <p class="text-4">This will create a steam_most_friends_latam.csv file, it has an ID field and a country code field.</p>
          <pre><code class="bash">
            # you should see argentine ids
            head -10 steam_most_friends_latam.csv

            # you should see venezuelan ids
            tail -10 steam_most_friends_latam.csv
          </code></pre>
        </section>
      <hr class="divider">
		
        <!-- friends
		============================ -->
        <section id="data_friends">
          <h2>Friends</h2>
          <p class="text-4">First, change the Steam API key in steam_latam_data/steam_api.py with yours.</p>
          <p class="alert alert-info">You can get yours <a target="_blank" href="https://steamcommunity.com/dev">here</a>.</p>
          <pre><code class="bash">
            API_KEY = 'YOUR_API_KEY'
          </code></pre>
          <p class="text-4">Now we will get the friendlist of each scraped user.</p>
          <pre><code class="bash">
            cd steam_latam_data/steam_friends.py
            python steam_friends.py
          </code></pre>
          <p class="text-4">This will create a friends.csv file, it has an ID field for both users (queried and friend).</p>
          <pre><code class="bash">
            head -10 friends.csv
          </code></pre>  
        </section>
		
		<hr class="divider">
		
		<!-- users
		============================ -->
        <section id="data_users">
          <h2>Users</h2>
          <p class="text-4">Now we will get the user data of each friend of the scraped users.</p>
          <pre><code class="bash">
            python steam_users.py
          </code></pre>
          <p class="alert alert-info">You can paralellize the task as needed, for this you need to change the iteration variables to your liking.</p>
          <p class="alert alert-danger">Remember that you have a maximum of 100k requests per day to the Steam API, you will get errors if you exceed this number. Also you may want to adjust the time between requests variable (TIME).</p>
          <p class="text-4">This will create a friends.csv file, it has an ID field for both users (queried and friend).</p>
          <pre><code class="bash">
            head -10 friends.csv
          </code></pre> 

        </section>
		
		<hr class="divider">
		
		<!-- Pig
		============================ -->
        <section id="pig">
          <h2>Apache Pig</h2>
          <p class="lead mb-5">Apache Pig was used to query the dataset, to do it by yourself, follow these instructions.</p>
        </section>
		  
		<!-- preparing
		============================ -->
		<section id="pig_preparing">
		  <h2>Preparing the Pig Script</h2>
		  <p class="text-4">First of all you need to modify the Apache Pig file.</p>
		  <p class="text-4">Indicate the PATH to your friends.csv file.</p>
      <pre><code class="bash">
        friends_raw = LOAD 'PATH_TO_YOUR_FRIENDS_FILE' USING PigStorage(',') AS (id0, id1, friends_since);
        friends_raw2 = LOAD 'PATH_TO_YOUR_FRIENDS_FILE' USING PigStorage(',') AS (id0, id1, friends_since);
      </code></pre>
      <p class="text-4">Indicate the PATH to your user_info*.csv files.</p>
      <pre><code class="bash">
        users_raw = LOAD 'PATH_TO_YOUR_USER_INFO_FILE' USING PigStorage(',') ...
        users_raw2 = LOAD 'PATH_TO_YOUR_USER_INFO_FILE' USING PigStorage(',') ...
        users_raw3 = LOAD 'PATH_TO_YOUR_USER_INFO_FILE' USING PigStorage(',') ...
        ...
      </code></pre>
      <p class="text-4">Make sure to modify the amounts of JOINs as needed.</p>
      <pre><code class="bash">
        users_raw = UNION users_raw, users_raw2;
        users_raw = UNION users_raw, users_raw3;
        ...
      </code></pre>
      <p class="text-4">For every STORE operation, use the appropiate PATH.</p>
      <pre><code class="bash">
        STORE table INTO 'YOUR_DESIRED_PATH';
      </code></pre>
		
		</section>
		
		<hr class="divider">
		
		<!-- results
		============================ -->
		<section id="pig_running">
		  <h2>Running the Pig Script</h2>

		  <p class="text-4">You basically have two options for running the script, locally or in cluster mode (if you happen to have one of course).</p>
		  
		  <p class="text-4">Local</p>
      <pre><code class="bash">
        pig -x ./steam_latam.pig
      </code></pre>
      <p class="text-4">Cluster</p>
      <pre><code class="bash">
        pig ./steam_latam.pig
      </code></pre>

      <p class="text-4">If you want to test parts of the script, copy each line into the pig shell (grunt).</p>

      <p class="text-4">Local</p>
      <pre><code class="bash">
        pig -x local
      </code></pre>
      <p class="text-4">Cluster</p>
      <pre><code class="bash">
        pig
      </code></pre>

		</section>
		
		<hr class="divider">
		
		<!-- Table
		============================ -->
		<section id="pig_results">
		<h2>Results</h2>
		<p class="text-4">You can check your results on your STORE_PATHs using bash:</p>
    <p class="text-4">Local</p>
      <pre><code class="bash">
        ls YOUR_DIRECTORY
        cat YOUR_FILE
      </code></pre>
      <p class="text-4">HDFS</p>
      <pre><code class="bash">
        hdfs df -ls YOUR_DIRECTORY
        hdfs dF -cat YOR_FILE
      </code></pre>
		
		</section>
        
		<hr class="divider">
		
		<!-- FAQ
		============================ -->
		<section id="idocs_faq">
          <h2>FAQ</h2>
          <p class="text-4">Frequently asked questions.</p>
          
		  <div class="row">
          <div class="col-lg-12">
            <div class="accordion accordion-alterate arrow-right" id="popularTopics">
              <div class="card">
                <div class="card-header" id="heading1">
                  <h5 class="mb-0"> <a href="#" class="collapsed" data-toggle="collapse" data-target="#collapse1" aria-expanded="false" aria-controls="collapse1">Why?</a> </h5>
                </div>
                <div id="collapse1" class="collapse" aria-labelledby="heading1" data-parent="#popularTopics">
                  <div class="card-body"> Because I can :) </div>
                </div>
              </div>
            </div>
          </div>
        </div>
          
        </section>
		
		<hr class="divider">
		

    </div>
	
  </div>
  <!-- Content end --> 
  
  <!-- Footer
  ============================ -->
  <footer id="footer" class="section bg-dark footer-text-light">
    <div class="container">
      <ul class="social-icons social-icons-lg social-icons-muted justify-content-center mb-3">
        <li><a data-toggle="tooltip" href="https://twitter.com/harnishdesign/" target="_blank" title="" data-original-title="Twitter"><i class="fab fa-twitter"></i></a></li>
        <li><a data-toggle="tooltip" href="http://www.facebook.com/harnishdesign/" target="_blank" title="" data-original-title="Facebook"><i class="fab fa-facebook-f"></i></a></li>
        <li><a data-toggle="tooltip" href="http://www.dribbble.com/harnishdesign/" target="_blank" title="" data-original-title="Dribbble"><i class="fab fa-dribbble"></i></a></li>
        <li><a data-toggle="tooltip" href="http://www.github.com/" target="_blank" title="" data-original-title="GitHub"><i class="fab fa-github"></i></a></li>
      </ul>
      <p class="text-center">Copyright &copy; 2020 <a href="http://www.harnishdesign.net/idocs-one-page-documentation-html-template/">iDocs</a>. All Rights Reserved.</p>
	  <p class="text-2 text-center mb-0">Design &amp; Develop by <a class="btn-link" target="_blank" href="http://www.harnishdesign.net/">HarnishDesign</a>.</p>
    </div>
  </footer>
  <!-- Footer end -->
  
</div>
<!-- Document Wrapper end --> 

<!-- Back To Top --> 
<a id="back-to-top" data-toggle="tooltip" title="Back to Top" href="javascript:void(0)"><i class="fa fa-chevron-up"></i></a> 

<!-- JavaScript
============================ -->
<script src="assets/vendor/jquery/jquery.min.js"></script> 
<script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script> 
<!-- Highlight JS -->
<script src="assets/vendor/highlight.js/highlight.min.js"></script> 
<!-- Easing --> 
<script src="assets/vendor/jquery.easing/jquery.easing.min.js"></script> 
<!-- Magnific Popup --> 
<script src="assets/vendor/magnific-popup/jquery.magnific-popup.min.js"></script> 
<!-- Custom Script -->
<script src="assets/js/theme.js"></script>
</body>
</html>
